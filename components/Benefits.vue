<template>
  <UPageSection
    id="benefits"
    title="ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Ð²Ñ‹Ð±Ð¸Ñ€Ð°ÑŽÑ‚ Ð½Ð°Ñ"
    description="ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð° ÑÐµÑ€Ð²Ð¸ÑÐ°"
    :ui="{ container: '!p-0' }"
  >
    <template #body>
      <div ref="benefitsRef" class="benefits">
        <div
          v-for="benefit in benefits"
          :key="benefit.title"
          class="benefit"
        >
          <div class="benefit__icon">
            {{ benefit.icon }}
          </div>

          <div class="benefit__title">
            {{ benefit.title }}
          </div>

          <div class="benefit__description">
            {{ benefit.description }}
          </div>
        </div>
      </div>
    </template>
  </UPageSection>
</template>

<script setup lang="ts">
import gsap from 'gsap'
import ScrollTrigger from 'gsap/ScrollTrigger'
import { onMounted, onUnmounted, ref } from 'vue'

gsap.registerPlugin(ScrollTrigger)

const benefitsRef = ref()
let benefitsCtx

onMounted(() => {
  desktopAnimation()
})

function desktopAnimation() {
  benefitsCtx = gsap.context((self) => {
    const boxes = self.selector('.benefit')

    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: benefitsRef.value,
        start: 'top 80%',
        toggleActions: 'play none none reverse',
      },
    })

    tl.from(boxes, {
      y: 50,
      opacity: 0,
      duration: 0.8,
      ease: 'power3.out',
      stagger: 0.25,
    })
  }, benefitsRef.value)
}

const benefits = [
  {
    icon: 'â±ï¸',
    title: 'Ð­ÐºÐ¾Ð½Ð¾Ð¼Ð¸Ñ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸',
    description: 'ÐœÑ‹ Ð±ÐµÑ€ÐµÐ¼ Ð½Ð° ÑÐµÐ±Ñ Ð²ÑÐµ Ñ€ÑƒÑ‚Ð¸Ð½Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸ â€” Ð¾Ñ‚ Ð¿Ð¾Ð¸ÑÐºÐ° Ð´Ð¾ Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²',
  },
  {
    icon: 'ðŸ›¡ï¸',
    title: 'Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ ÑÐ´ÐµÐ»Ð¾Ðº',
    description: 'ÐŸÐ¾Ð»Ð½Ð°Ñ ÑŽÑ€Ð¸Ð´Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð² Ð¸ ÐºÐ¾Ð½Ñ‚Ñ€Ð°Ð³ÐµÐ½Ñ‚Ð¾Ð²',
  },
  {
    icon: 'ðŸ‘¤',
    title: 'Ð›Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€',
    description: 'ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ð½Ñ‚ Ð½Ð° Ð²ÑÐµÑ… ÑÑ‚Ð°Ð¿Ð°Ñ… Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹',
  },
  {
    icon: 'â­',
    title: 'Ð›ÑƒÑ‡ÑˆÐ¸Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ',
    description: 'Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ð¿Ð°Ñ€Ñ‚Ð½ÐµÑ€ÑÐºÑƒÑŽ ÑÐµÑ‚ÑŒ Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð²Ñ‹Ð³Ð¾Ð´Ð½Ñ‹Ñ… Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹',
  },
  {
    icon: 'ðŸ’¬',
    title: 'ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° 24/7',
    description: 'Ð’ÑÐµÐ³Ð´Ð° Ð½Ð° ÑÐ²ÑÐ·Ð¸ Ð´Ð»Ñ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ Ð»ÑŽÐ±Ñ‹Ñ… Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð²',
  },
  {
    icon: 'ðŸ†',
    title: 'ÐžÐ¿Ñ‹Ñ‚ Ð¸ ÑÐºÑÐ¿ÐµÑ€Ñ‚Ð¸Ð·Ð°',
    description: 'Ð‘Ð¾Ð»ÐµÐµ 10 Ð»ÐµÑ‚ Ð½Ð° Ñ€Ñ‹Ð½ÐºÐµ ÐºÐ¾Ð½ÑÑŒÐµÑ€Ð¶-ÑƒÑÐ»ÑƒÐ³',
  },
]

onUnmounted(() => {
  benefitsCtx?.revert()
})
</script>

<style lang="scss">
.benefits {
  display: grid;
  gap: 20px;
  grid-template-columns: repeat(3, minmax(150px, 350px));
  justify-content: center;

  @include mobile {
    gap: 10px;
    grid-template-columns: repeat(2, minmax(150px, 350px));
  }
}

.benefit {
  display: flex;
  flex-direction: column;
  gap: 10px;
  width: 100%;
  max-width: 300px;

  &__icon {
    font-size: 24px;
  }

  &__title {
    font-size: 20px;
    font-weight: 600;
  }

  &__description {
    font-size: 14px;
  }
}
</style>
